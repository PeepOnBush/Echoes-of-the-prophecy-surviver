[gd_scene load_steps=14 format=4 uid="uid://b21ihqouoo3g6"]

[ext_resource type="Script" uid="uid://chywaw500khll" path="res://Levels/Scripts/level.gd" id="1_hs4iy"]
[ext_resource type="PackedScene" uid="uid://dt1b3x65mntyw" path="res://Levels/player_spawn.tscn" id="2_0lqvu"]
[ext_resource type="AudioStream" uid="uid://1r67g4ua83ap" path="res://Levels/music/example_music_03.ogg" id="2_uirmi"]
[ext_resource type="PackedScene" uid="uid://crk2sdpxwjdj6" path="res://Tile Maps/Dungeon-01-layer.tscn" id="3_kb0tw"]
[ext_resource type="PackedScene" uid="uid://cg42ihnxv2ats" path="res://Levels/level_transition.tscn" id="4_mygej"]
[ext_resource type="PackedScene" uid="uid://hatum46ecrmx" path="res://Interactables/dungeon/pressure_plate.tscn" id="5_w120r"]
[ext_resource type="PackedScene" uid="uid://b6ryrbmtlmx25" path="res://Interactables/dungeon/barred_door.tscn" id="6_xdjt0"]
[ext_resource type="PackedScene" uid="uid://begrkqj8rxd3e" path="res://Quests/Utility_nodes/quest_activated_switch.tscn" id="6_xxut5"]
[ext_resource type="Resource" uid="uid://cfduwutvow4sn" path="res://Quests/Return_lost_flute.tres" id="7_yihmr"]
[ext_resource type="PackedScene" uid="uid://c306w0wfwehyc" path="res://Interactables/dungeon/pushable_statue.tscn" id="7_ywjye"]
[ext_resource type="PackedScene" uid="uid://d03ocog1h40dv" path="res://Enemies/goblin/goblin.tscn" id="8_j1i0r"]
[ext_resource type="PackedScene" uid="uid://b2vctrqlv3edw" path="res://GeneralNodes/EnemyCounter/enemy_counter.tscn" id="8_t7g2d"]
[ext_resource type="PackedScene" uid="uid://dx48lwg3wwvy2" path="res://Quests/Utility_nodes/quest_advance_trigger.tscn" id="8_u06f2"]

[node name="01" type="Node2D"]
position = Vector2(-2, -1)
script = ExtResource("1_hs4iy")
music = ExtResource("2_uirmi")

[node name="Dungeon-01-layer" parent="." instance=ExtResource("3_kb0tw")]
tile_map_data = PackedByteArray("AAD8//7/AAAJAAAAAAD8////AAAJAAEAAAD8/wAAAAAJAAMAAAD8/wEAAAAJAAMAAAD8/wIAAAAJAAEAAAD8/wMAAAAJAAIAAAD8/wQAAAAJAAIAAAD8/wUAAAAJAAIAAAD8/wYAAAAJAAMAAAD8/wcAAAAJAAQAAAD8/wgAAAAJAAUAAAD8/wkAAAAJAAYAAAD9//7/AAAKAAAAAAD9////AAAKAAEAAAD9/wAAAAAKAAQAAAD9/wEAAAAKAAQAAAD9/wIAAAAKAAQAAAD9/wMAAAAKAAQAAAD9/wQAAAAKAAQAAAD9/wUAAAAKAAQAAAD9/wYAAAAKAAQAAAD9/wcAAAAKAAQAAAD9/wgAAAAKAAUAAAD9/wkAAAAKAAYAAAD+//7/AAALAAAAAAD+////AAAMAAEAAAD+/wAAAAABAAEAAAD+/wEAAAABAAEAAAD+/wIAAAABAAEAAAD+/wMAAAABAAEAAAD+/wQAAAABAAEAAAD+/wUAAAABAAEAAAD+/wYAAAABAAEAAAD+/wcAAAABAAEAAAD+/wgAAAAMAAUAAAD+/wkAAAAMAAYAAAD///7/AAAMAAAAAAD/////AAANAAEAAAD//wAAAAAAAAEAAAD//wEAAAABAAAAAAD//wIAAAABAAEAAAD//wMAAAABAAAAAAD//wQAAAABAAAAAAD//wUAAAABAAAAAAD//wYAAAABAAEAAAD//wcAAAAAAAEAAAD//wgAAAANAAUAAAD//wkAAAAKAAYAAAAAAP7/AAANAAAAAAAAAP//AAALAAEAAAAAAAAAAAAAAAEAAAAAAAEAAAAAAAEAAAAAAAIAAAABAAEAAAAAAAMAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAcAAAAAAAEAAAAAAAgAAAANAAUAAAAAAAkAAAALAAYAAAABAP7/AAANAAAAAAABAP//AAALAAEAAAABAAAAAAAAAAEAAAABAAEAAAAAAAEAAAABAAIAAAABAAEAAAABAAMAAAAAAAAAAAABAAQAAAAAAAAAAAABAAUAAAAAAAAAAAABAAYAAAAAAAAAAAABAAcAAAAAAAEAAAABAAgAAAANAAUAAAABAAkAAAALAAYAAAACAP7/AAAMAAAAAAACAP//AAANAAEAAAACAAAAAAAAAAEAAAACAAEAAAABAAAAAAACAAIAAAABAAEAAAACAAMAAAABAAAAAAACAAQAAAABAAAAAAACAAUAAAABAAAAAAACAAYAAAABAAEAAAACAAcAAAAAAAEAAAACAAgAAAANAAUAAAACAAkAAAAKAAYAAAADAP7/AAANAAAAAAADAP//AAALAAEAAAADAAAAAAAAAAEAAAADAAEAAAAAAAEAAAADAAIAAAABAAEAAAADAAMAAAAAAAAAAAADAAQAAAAAAAAAAAADAAUAAAAAAAAAAAADAAYAAAAAAAAAAAADAAcAAAAAAAEAAAADAAgAAAANAAUAAAADAAkAAAALAAYAAAAEAP7/AAAOAAAAAAAEAP//AAAMAAEAAAAEAAAAAAAEAAQAAAAEAAEAAAABAAEAAAAEAAIAAAABAAEAAAAEAAMAAAABAAAAAAAEAAQAAAABAAAAAAAEAAUAAAABAAAAAAAEAAYAAAABAAAAAAAEAAcAAAAFAAEAAAAEAAgAAAANAAUAAAAEAAkAAAAMAAYAAAAFAP7/AAAEAAUAAAAFAP//AAANAAEAAAAFAAAAAAAEAAcAAAAFAAEAAAAAAAIAAAAFAAIAAAAAAAMAAAAFAAMAAAAAAAIAAAAFAAQAAAAAAAIAAAAFAAUAAAAAAAIAAAAFAAYAAAAAAAMAAAAFAAcAAAAAAAUAAAAFAAgAAAAAAAYAAAAFAAkAAAAAAAcAAAAGAP7/AAAFAAUAAAAGAP//AAAFAAYAAAAGAAAAAAAFAAcAAAAGAAEAAAABAAIAAAAGAAIAAAABAAMAAAAGAAMAAAABAAIAAAAGAAQAAAABAAIAAAAGAAUAAAABAAIAAAAGAAYAAAABAAMAAAAGAAcAAAABAAUAAAAGAAgAAAABAAYAAAAGAAkAAAABAAcAAAAHAP7/AAAGAAUAAAAHAP//AAAGAAYAAAAHAAAAAAAGAAcAAAAHAAEAAAAAAAIAAAAHAAIAAAAAAAMAAAAHAAMAAAAAAAIAAAAHAAQAAAAAAAIAAAAHAAUAAAAAAAIAAAAHAAYAAAAAAAMAAAAHAAcAAAACAAUAAAAHAAgAAAACAAYAAAAHAAkAAAACAAcAAAAIAP7/AAAKAAAAAAAIAP//AAAHAAYAAAAIAAAAAAAHAAcAAAAIAAEAAAABAAIAAAAIAAIAAAABAAMAAAAIAAMAAAABAAIAAAAIAAQAAAABAAIAAAAIAAUAAAABAAIAAAAIAAYAAAABAAMAAAAIAAcAAAADAAUAAAAIAAgAAAADAAYAAAAIAAkAAAADAAcAAAAJAP7/AAAKAAAAAAAJAP//AAALAAEAAAAJAAAAAAAIAAQAAAAJAAEAAAAAAAEAAAAJAAIAAAAAAAEAAAAJAAMAAAAAAAAAAAAJAAQAAAAAAAAAAAAJAAUAAAAAAAAAAAAJAAYAAAAAAAAAAAAJAAcAAAAHAAEAAAAJAAgAAAALAAUAAAAJAAkAAAAKAAYAAAAKAP7/AAALAAAAAAAKAP//AAAMAAEAAAAKAAAAAAABAAEAAAAKAAEAAAABAAEAAAAKAAIAAAABAAEAAAAKAAMAAAABAAAAAAAKAAQAAAABAAAAAAAKAAUAAAABAAAAAAAKAAYAAAABAAAAAAAKAAcAAAABAAEAAAAKAAgAAAAMAAUAAAAKAAkAAAALAAYAAAALAP7/AAAMAAAAAAALAP//AAANAAEAAAALAAAAAAAAAAEAAAALAAEAAAAAAAEAAAALAAIAAAAAAAEAAAALAAMAAAAAAAEAAAALAAQAAAAAAAEAAAALAAUAAAAAAAEAAAALAAYAAAAAAAEAAAALAAcAAAAAAAEAAAALAAgAAAALAAUAAAALAAkAAAAMAAYAAAAMAP7/AAANAAAAAAAMAP//AAALAAEAAAAMAAAAAAAAAAEAAAAMAAEAAAAAAAAAAAAMAAIAAAAAAAAAAAAMAAMAAAABAAEAAAAMAAQAAAABAAEAAAAMAAUAAAABAAEAAAAMAAYAAAABAAEAAAAMAAcAAAAAAAEAAAAMAAgAAAALAAUAAAAMAAkAAAAMAAYAAAANAP7/AAAOAAAAAAANAP//AAAMAAEAAAANAAAAAAAAAAEAAAANAAEAAAAAAAEAAAANAAIAAAAAAAEAAAANAAMAAAAAAAEAAAANAAQAAAAAAAEAAAANAAUAAAAAAAEAAAANAAYAAAAAAAEAAAANAAcAAAAAAAEAAAANAAgAAAAMAAUAAAANAAkAAAANAAYAAAAOAP7/AAANAAAAAAAOAP//AAALAAEAAAAOAAAAAAAAAAEAAAAOAAEAAAAAAAAAAAAOAAIAAAAAAAAAAAAOAAMAAAABAAEAAAAOAAQAAAABAAEAAAAOAAUAAAABAAEAAAAOAAYAAAABAAEAAAAOAAcAAAAAAAEAAAAOAAgAAAALAAUAAAAOAAkAAAAMAAYAAAAPAP7/AAANAAAAAAAPAP//AAALAAEAAAAPAAAAAAAAAAEAAAAPAAEAAAAAAAAAAAAPAAIAAAAAAAAAAAAPAAMAAAABAAEAAAAPAAQAAAABAAEAAAAPAAUAAAABAAEAAAAPAAYAAAABAAEAAAAPAAcAAAAAAAEAAAAPAAgAAAALAAUAAAAPAAkAAAAMAAYAAAAQAP7/AAAOAAAAAAAQAP//AAAMAAEAAAAQAAAAAAAAAAEAAAAQAAEAAAAAAAEAAAAQAAIAAAAAAAEAAAAQAAMAAAAAAAEAAAAQAAQAAAAAAAEAAAAQAAUAAAAAAAEAAAAQAAYAAAAAAAEAAAAQAAcAAAAAAAEAAAAQAAgAAAAMAAUAAAAQAAkAAAANAAYAAAARAP7/AAAOAAAAAAARAP//AAAOAAEAAAARAAAAAAAOAAIAAAARAAEAAAAOAAMAAAARAAIAAAAOAAMAAAARAAMAAAAOAAMAAAARAAQAAAAOAAMAAAARAAUAAAAOAAMAAAARAAYAAAAOAAMAAAARAAcAAAAOAAMAAAARAAgAAAAOAAUAAAARAAkAAAAOAAYAAAASAP7/AAAPAAAAAAASAP//AAAPAAEAAAASAAAAAAAPAAIAAAASAAEAAAAPAAEAAAASAAIAAAAPAAIAAAASAAMAAAAPAAEAAAASAAQAAAAPAAEAAAASAAUAAAAPAAEAAAASAAYAAAAPAAMAAAASAAcAAAAPAAQAAAASAAgAAAAPAAUAAAASAAkAAAAPAAYAAAA=")

[node name="PlayerSpawn" parent="." instance=ExtResource("2_0lqvu")]
position = Vector2(181, 95)

[node name="LevelTransition" parent="." instance=ExtResource("4_mygej")]
position = Vector2(224, 240)
level = "res://Levels/Area01/01.tscn"
target_transition_area = "LevelTransition3"
center_player = true
side = 3

[node name="QuestActivatedSwitch" parent="LevelTransition" instance=ExtResource("6_xxut5")]
check_type = 1
remove_when_activated = true
react_to_global_signal = true
free_on_remove = true
linked_quest = ExtResource("7_yihmr")
quest_step = 1
setting_summary = "UPDATE QUEST:
Quest: Return lost magical flute
Checking if player has completed step: find the cave"

[node name="QuestAdvanceTrigger" parent="LevelTransition/QuestActivatedSwitch" instance=ExtResource("8_u06f2")]
signal_name = "scene_entered"
linked_quest = ExtResource("7_yihmr")
quest_step = 1
setting_summary = "UPDATE QUEST:
Quest: Return lost magical flute
Step: 1 - find the cave
Complete: false"

[node name="LevelTransition2" parent="." instance=ExtResource("4_mygej")]
position = Vector2(222, 9)
level = "res://Levels/Dungeon01/02.tscn"
center_player = true
side = 2

[node name="PressurePlate" parent="." instance=ExtResource("5_w120r")]
position = Vector2(143, 65)

[node name="BarredDoor" parent="." instance=ExtResource("6_xdjt0")]
position = Vector2(189, 23)

[node name="PushableStatue" parent="." instance=ExtResource("7_ywjye")]
texture_filter = 1
position = Vector2(364, 71)
persistent = true
persistent_location = Vector2(145, 65)

[node name="EnemyCounter" parent="." instance=ExtResource("8_t7g2d")]
y_sort_enabled = true

[node name="goblin" parent="EnemyCounter" instance=ExtResource("8_j1i0r")]
position = Vector2(55.3881, 116.417)

[node name="goblin2" parent="EnemyCounter" instance=ExtResource("8_j1i0r")]
position = Vector2(468.388, 71.4169)

[connection signal="scene_entered" from="LevelTransition" to="LevelTransition/QuestActivatedSwitch/QuestAdvanceTrigger" method="advanceQuest"]
[connection signal="pressed" from="PressurePlate" to="BarredDoor" method="openDoor"]
[connection signal="unpressed" from="PressurePlate" to="BarredDoor" method="closeDoor"]
